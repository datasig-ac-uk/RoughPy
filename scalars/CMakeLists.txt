cmake_minimum_required(VERSION 3.21)

project(RoughPyScalars
        VERSION 0.0.9
        LANGUAGES CXX)


add_roughpy_component(Scalars
        PUBLIC_HEADERS
        include/roughpy/scalars/devices/buffer.h
        include/roughpy/scalars/devices/core.h
        include/roughpy/scalars/devices/device_handle.h
        include/roughpy/scalars/devices/device_provider.h
        include/roughpy/scalars/devices/event.h
        include/roughpy/scalars/devices/host_device.h
        include/roughpy/scalars/devices/kernel.h
        include/roughpy/scalars/devices/kernel_arg.h
        include/roughpy/scalars/devices/macros.h
        include/roughpy/scalars/devices/queue.h
        include/roughpy/scalars/devices/types.h
        include/roughpy/scalars/types/monomial.h
        include/roughpy/scalars/devices.h
        include/roughpy/scalars/packed_scalar_type_ptr.h
        include/roughpy/scalars/scalar.h
        include/roughpy/scalars/scalar_array.h
        include/roughpy/scalars/scalar_interface.h
        include/roughpy/scalars/scalar_serialization.h
        include/roughpy/scalars/scalar_stream.h
        include/roughpy/scalars/scalar_traits.h
        include/roughpy/scalars/scalar_type.h
        include/roughpy/scalars/scalars_fwd.h
        include/roughpy/scalars/traits.h
        include/roughpy/scalars.h
        SOURCES
        src/devices/host/host_buffer.cpp
        src/devices/host/host_buffer.h
        src/devices/host/host_decls.h
        src/devices/host/host_device_impl.cpp
        src/devices/host/host_device_impl.h
        src/devices/host/host_device_provider.cpp
        src/devices/host/host_device_provider.h
        src/devices/host/host_event.cpp
        src/devices/host/host_event.h
        src/devices/host/host_kernel.cpp
        src/devices/host/host_kernel.h
        src/devices/host/host_queue.cpp
        src/devices/host/host_queue.h
        src/devices/opencl/ocl_buffer.cpp
        src/devices/opencl/ocl_buffer.h
        src/devices/opencl/ocl_decls.h
        src/devices/opencl/ocl_device.cpp
        src/devices/opencl/ocl_device.h
        src/devices/opencl/ocl_device_provider.cpp
        src/devices/opencl/ocl_device_provider.h
        src/devices/opencl/ocl_event.cpp
        src/devices/opencl/ocl_event.h
        src/devices/opencl/ocl_handle_errors.cpp
        src/devices/opencl/ocl_handle_errors.h
        src/devices/opencl/ocl_headers.h
        src/devices/opencl/ocl_helpers.cpp
        src/devices/opencl/ocl_helpers.h
        src/devices/opencl/ocl_kernel.cpp
        src/devices/opencl/ocl_kernel.h
        src/devices/opencl/ocl_queue.cpp
        src/devices/opencl/ocl_queue.h
        src/devices/opencl/ocl_version.cpp
        src/devices/opencl/ocl_version.h
        src/devices/buffer.cpp
        src/devices/buffer_interface.cpp
        src/devices/core.cpp
        src/devices/device_handle.cpp
        src/devices/device_interface_base.cpp
        src/devices/device_provider.cpp
        src/devices/event.cpp
        src/devices/event_interface.cpp
        src/devices/rational_numbers.cpp
        src/devices/get_device.cpp
        src/devices/kernel.cpp
        src/devices/kernel_arg.cpp
        src/devices/kernel_interface.cpp
        src/devices/kernel_launch_params.cpp
        src/devices/queue.cpp
        src/devices/queue_interface.cpp
        src/random/random_impl.cpp
        src/random/random_impl.h
        src/random/standard_random_generator.cpp
        src/random/standard_random_generator.h
        src/scalar/arithmetic.cpp
        src/scalar/arithmetic.h
        src/scalar/casts.cpp
        src/scalar/casts.h
        src/scalar/comparison.cpp
        src/scalar/comparison.h
        src/scalar/do_macro.h
        src/scalar/packed_type.h
        src/scalar/print.cpp
        src/scalar/print.h
        src/scalar/raw_bytes.cpp
        src/scalar/raw_bytes.h
        src/scalar/serialization.cpp
        src/scalar/serialization.h
        src/scalar/type_promotion.cpp
        src/scalar/type_promotion.h
        src/scalar_helpers/standard_scalar_type.h
        src/scalar_implementations/arbitrary_precision_rational.cpp
        src/scalar_implementations/arbitrary_precision_rational.h
        src/scalar_implementations/bfloat.cpp
        src/scalar_implementations/bfloat.h
        src/scalar_implementations/complex.cpp
        src/scalar_implementations/complex.h
        src/scalar_implementations/half.cpp
        src/scalar_implementations/half.h
        src/scalar_implementations/monomial.cpp
        src/scalar_implementations/poly_rational.cpp
        src/scalar_implementations/poly_rational.h
        src/scalar_implementations/rational.cpp
        src/scalar_implementations/rational.h
        src/types/aprational/ap_rational_type.cpp
        src/types/aprational/ap_rational_type.h
        src/types/apratpoly/ap_rat_poly_type.cpp
        src/types/apratpoly/ap_rat_poly_type.h
        src/types/bfloat16/b_float_16_type.cpp
        src/types/bfloat16/b_float_16_type.h
        src/types/bfloat16/bfloat16_random_generator.cpp
        src/types/bfloat16/bfloat16_random_generator.h
        src/types/double/double_type.cpp
        src/types/double/double_type.h
        src/types/float/float_type.cpp
        src/types/float/float_type.h
        src/types/half/half_random_generator.cpp
        src/types/half/half_random_generator.h
        src/types/half/half_type.cpp
        src/types/half/half_type.h
        src/random.cpp
        src/scalar.cpp
        src/scalar_array.cpp
        src/scalar_array_element.cpp
        src/scalar_array_element.h
        src/scalar_interface.cpp
        src/scalar_serialization.cpp
        src/scalar_stream.cpp
        src/scalar_type.cpp
        src/scalar_type_of.cpp
        DEPENDENCIES
        PUBLIC
        Boost::boost
        Libalgebra_lite::Libalgebra_lite
        PRIVATE
        PCGRandom::pcg_random
        OpenCL::OpenCL
        GMP::GMP
        Eigen3::Eigen
        NEEDS
        RoughPy::Core
        RoughPy::Platform
)

target_precompile_headers(RoughPy_Scalars PRIVATE
        <boost/multiprecision/gmp.hpp>
        <libalgebra_lite/coefficients.h>
        <libalgebra_lite/polynomial.h>
)
target_precompile_headers(RoughPy_Scalars PRIVATE
        include/roughpy/scalars/scalars_fwd.h
)

add_roughpy_test(scalars
        SRC
        src/test_key_scalar_array.cpp
        src/test_monomial.cpp
        src/test_pcg_standard_random.cpp
        src/test_scalar.cpp
        src/test_scalar_type.cpp
        src/devices/test_cpu_device.cpp
        src/devices/test_gpu_device.cpp
        DEP
        OpenCL::OpenCL
        NEEDS
        RoughPy::Scalars
)
